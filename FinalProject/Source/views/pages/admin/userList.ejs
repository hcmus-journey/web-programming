<table class="table-fixed w-full border-collapse border border-gray-300">
  <thead class="border-b border-gray-300">
    <tr class=" ">
      <th class="text-primary px-4 py-4 text-left w-full">Name</th>
      <th class="text-primary px-4 py-4 text-left w-full">Email</th>
      <th class="text-primary px-4 py-4 text-left w-1/3">Role</th>
      <th class="text-primary px-4 py-4 text-left w-1/3">Status</th>
      <th class="text-primary px-4 py-4 text-left w-full">Registration Time</th>
      <th class="text-primary px-4 py-4 text-left w-1/3">Action</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(eachUser => { %>
      <tr class="hover:bg-gray-200 ">
        <td class="px-4 py-4 break-words w-full"><%= eachUser.name %></td>
        <td class="px-4 py-4 break-words w-full"><%= eachUser.email %></td>
        <td class="px-4 py-4 w-1/3"><%= eachUser.user_role %></td>
        <td class="px-4 py-4 w-1/3" id="status"><%= eachUser.status %></td>
        <td class="px-4 py-4 break-words w-full"><%= new Date(eachUser.created_at).toLocaleString('en-US', { timeZone: 'Asia/Bangkok', dateStyle: 'medium', timeStyle: 'short' }) %></td>
        <td class="px-4 py-4 w-1/3 text-white"><% if (eachUser.user_id != user.user_id) {%>
          <button id="change-status-btn" class="bg-primary w-full" onclick="openModal(eachUser)">
            <%= eachUser.status == 'ACTIVE'? "Ban" : "Unban" %></button> <% } %>
        </td>
      </tr>
    <% }); %>
  </tbody>
</table>

<div id="modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center">
  <div class="bg-white rounded-lg shadow-lg max-w-md md:w-1/2 sm:w-full p-6">
    <h2 class="text-xl font-bold text-gray-800 mb-4">Confirm Action</h2>
    <p id="modalMessage" class="text-gray-700 mb-6"></p>
    <div class="flex justify-end gap-3">
      <p>Are you sure you want to <span id="action-field"></span> <span id="username-field"></span> ?</p>
      <button
        type="button"
        class="py-2 px-4 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg"
        onclick="closeModal()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="py-2 px-4 bg-blue-500 hover:bg-blue-600 text-gray-800 rounded-lg">
        Confirm
      </button>
    </div>
  </div>
</div>
  
<script type="module" src="/public/js/UserList.js"></script>
  